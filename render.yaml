services:
  - type: web
    name: chess-app
    runtime: node
    
    buildCommand: |
      apt-get update
      apt-get install -y stockfish
      echo "Stockfish path: $(which stockfish)"
      npm install --production=false
      cd backend && npm install && cd ..
      npm run build

    startCommand: cd backend && npm start

    envVars:
      - key: PORT
        value: 3001
      - key: NODE_ENV
        value: production
